{{ define "header" }}
{{ partial "header.html" . }}
{{ end }}

{{ define "content" }}
<iframe src="{{ .Params.iframeUrl }}" title="{{ .Title }}" frameborder="0" allowfullscreen
    sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-storage-access-by-user-activation allow-modals">
</iframe>
<style>
    .content.container {
        padding: 0;
        max-width: 100%;
        /* overflow: hidden; */
    }

    .content.container iframe {
        width: 100%;
        height: calc(100vh - var(--sidebar-height, 49px));
        border: none;
        display: block;
    }

    @media (min-width: 768px) {
        .content {
            margin-left: 0;
            margin-right: 0;
        }
    }
</style>
<script>
    (function () {
        var iframeSelector = '.content.container iframe';
        var rafId = 0;
        var resizeDebounceTimer = 0;

        function resizeIframe() {
            var iframe = document.querySelector(iframeSelector);
            if (!iframe) {
                return;
            }
            var rect = iframe.getBoundingClientRect();
            var available = window.innerHeight - rect.top;
            if (available < 0) {
                available = 0;
            }
            iframe.style.height = available + 'px';
        }

        function scheduleResize() {
            if (rafId) {
                return;
            }
            rafId = window.requestAnimationFrame(function () {
                rafId = 0;
                resizeIframe();
            });
        }

        function scheduleResizeDebounced(delay) {
            window.clearTimeout(resizeDebounceTimer);
            resizeDebounceTimer = window.setTimeout(scheduleResize, delay || 120);
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', scheduleResize, { once: true });
        }
        scheduleResize();

        window.addEventListener('load', scheduleResize);
        window.addEventListener('pageshow', scheduleResize);
        window.addEventListener('resize', function () {
            scheduleResizeDebounced(120);
        });

        var iframe = document.querySelector(iframeSelector);
        if (iframe) {
            iframe.addEventListener('load', scheduleResize);
        }

        var menuToggle = document.getElementById('menuToggle');
        if (menuToggle) {
            menuToggle.addEventListener('change', function () {
                scheduleResize();
                window.setTimeout(scheduleResize, 250);
            });
        }
    })();
</script>
{{ end }}

{{ define "footer" }}
{{ partial "footer/font-awesome-js.html" . }}
{{ end }}
